{"version":3,"file":"static/js/847.bc402203.chunk.js","mappings":"4HAIMA,EAAUC,IAAAA,OAAa,CAAEC,QAFf,8BAGhBF,EAAQG,aAAaC,QAAQC,KACzB,SAAAC,GAEI,OADAA,EAAIC,QAAJ,cAA6B,UAAWC,aAAaC,QAAQ,eACtDH,KAEX,SAAAI,GACI,OAAOC,QAAQC,OAAOF,MAG9BV,EAAQG,aAAaU,SAASR,KAC1B,SAAAC,GAAM,OAAOA,KACb,SAAAI,GAYI,OAVa,OADAA,EAAIG,SAAWH,EAAIG,SAASC,OAAS,QAE9CC,QAAQC,IAAI,iBACZf,IAAAA,IAAU,gBAAgB,CAAEM,QAAS,CAAEU,cAAc,UAAD,OAAYT,aAAaC,QAAQ,oBAAuBS,MAAK,SAAAZ,GAC7GS,QAAQC,IAAIV,EAAIa,MAChBX,aAAaY,QAAQ,cAAcd,EAAIa,SAE1CE,OAAM,SAAAX,GACHK,QAAQC,IAAIN,OAGbC,QAAQC,OAAOF,MAG9B,O,kIC4DA,UArFoB,WAChB,OAAwBY,EAAAA,EAAAA,UAAS,IAAjC,eAAOC,EAAP,KAAaC,EAAb,KACA,GAA0BF,EAAAA,EAAAA,UAAS,IAAnC,eAAOG,EAAP,KAAcC,EAAd,KACMC,EAASC,EAAAA,KAAaC,MAAM,CAC9BN,KAAMK,EAAAA,KAAaE,IAAI,EAAG,4BAA4BC,SAAS,kBAC/DN,MAAOG,EAAAA,KAAaE,IAAI,EAAG,4BAA4BC,SAAS,oBACjEA,WACH,GAAyDC,EAAAA,EAAAA,IAAQ,CAC7DC,UAAUC,EAAAA,EAAAA,GAAYP,KADlBQ,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,aAA2BC,EAA5C,EAA+BC,UAAaD,OAG5C,GAAwBf,EAAAA,EAAAA,UAAS,MAAjC,eAAaiB,GAAb,YACAC,EAAAA,EAAAA,YAAU,WAAM,8CACZ,kHAE0BxC,EAAAA,EAAAA,IAAY,UAFtC,OAEcM,EAFd,OAGQiC,EAAQjC,EAAIa,MACO,MAAfb,EAAIQ,SACJU,EAAQlB,EAAIa,KAAKI,MACjBG,EAASpB,EAAIa,KAAKM,QAN9B,gDASQV,QAAQ0B,MAAR,MATR,0DADY,uBAAC,WAAD,wBAaZC,KACD,IACH,IAaMC,GAAcC,EAAAA,EAAAA,KAAY,SAAAC,GAAK,OAAIA,EAAMF,YAAYA,eAI3D,OAHAH,EAAAA,EAAAA,YAAU,YACLG,GAAeG,OAAOC,SAASC,QAAQ,OAC1C,KAEE,iBAAKC,UAAU,0DAAf,WACI,eAAIA,UAAU,mDAAd,wCACA,iBAAMC,SAAUd,GAAa,SAAAjB,GAAI,OApBrB,SAACA,GAAS,8CAC1B,4GAE0BnB,EAAAA,EAAAA,KAAa,cAAe,CAAE,KAAQmB,EAAKI,KAAM,MAASJ,EAAKM,QAFzF,OAG2B,MAH3B,OAGgBX,QACJqC,MAAM,qBAJlB,gDAOQpC,QAAQ0B,MAAR,MAPR,0DAD0B,uBAAC,WAAD,wBAW1BC,GASyCU,CAAYjC,MAAQ8B,UAAU,+BAAnE,UACI,iBAAKI,MAAM,iBAAX,WACI,SAAC,KAAD,CACIlB,QAASA,EACTZ,KAAK,OACL+B,aAAc/B,EACdgC,OAAQ,YAAsC,IAAD,MAAlCC,MAASC,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,OAC1B,OACI,iBAAKT,UAAU,OAAf,WACI,mBAAOU,QAAQ,OAAOV,UAAU,aAAhC,qBAAoD,iBAAMA,UAAU,eAAhB,mBACpD,kBAAOK,aAAc/B,EAAMkC,SAAUA,EAAUC,OAAQA,EAAQE,KAAK,OAAOC,GAAG,OAAOZ,UAAU,wLAC/F,cAAGA,UAAU,eAAb,mBAA6BZ,EAAOd,YAApC,aAA6B,EAAauC,iBAK1D,SAAC,KAAD,CACI3B,QAASA,EACTZ,KAAK,QACL+B,aAAc7B,EACd8B,OAAQ,YAAsC,IAAD,MAAlCC,MAASC,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,OAC1B,OACI,iBAAKT,UAAU,OAAf,WACI,mBAAOU,QAAQ,QAAQV,UAAU,aAAjC,iCAAyD,iBAAMA,UAAU,eAAhB,mBACzD,kBAAOK,aAAc7B,EAAOgC,SAAUA,EAAUC,OAAQA,EAAQE,KAAK,OAAOC,GAAG,QAAQZ,UAAU,wLACjG,cAAGA,UAAU,eAAb,mBAA6BZ,EAAOZ,aAApC,aAA6B,EAAcqC,iBAK3D,mBAAQF,KAAK,SAASX,UAAU,oJAAhC,UACI","sources":["Components/Interceptors/axios.js","Pages/Profile-Pages/ProfileEdit.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst baseURL = 'http://95.85.127.250:3002';\r\n\r\nconst service = axios.create({ baseURL });\r\nservice.interceptors.request.use(\r\n    res=>{\r\n        res.headers['Authorization']='Bearer '+ localStorage.getItem('accessToken')\r\n        return res;\r\n    },\r\n    err=>{\r\n        return Promise.reject(err)\r\n    }\r\n);\r\nservice.interceptors.response.use(\r\n    res=>{return res},\r\n    err=>{\r\n        const status=err.response ? err.response.status : null;\r\n        if (status===403){\r\n            console.log('Refresh Token');\r\n            axios.get('users/refresh',{ headers: { Authorization: `Bearer ${localStorage.getItem('refreshToken')}` } }).then(res=>{\r\n                console.log(res.data);\r\n                localStorage.setItem('accessToken',res.data)\r\n            })\r\n            .catch(err=>{\r\n                console.log(err);\r\n            })\r\n        }\r\n        return Promise.reject(err)\r\n    }\r\n)\r\nexport default service","import React, { useEffect, useState } from 'react'\r\nimport { Controller, useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport * as yup from 'yup';\r\nimport service from '../../Components/Interceptors/axios';\r\nimport { useSelector } from 'react-redux';\r\nconst ProfileEdit = () => {\r\n    const [name, setName] = useState('')\r\n    const [email, setEmail] = useState('')\r\n    const schema = yup.object().shape({\r\n        name: yup.string().min(5, \"minimum 5 simbol bolmaly\").required('meydany doldur'),\r\n        email: yup.string().min(5, \"minimum 5 simbol bolmaly\").required('meydany doldur'),\r\n    }).required();\r\n    const { control, handleSubmit, formState: { errors } } = useForm({\r\n        resolver: yupResolver(schema)\r\n    });\r\n    const [user, setUser] = useState(null)\r\n    useEffect(() => {\r\n        async function getData() {\r\n            try {\r\n                const res = await service.get('/users')\r\n                setUser(res.data)\r\n                if (res.status === 200) {\r\n                    setName(res.data.name)\r\n                    setEmail(res.data.email)\r\n                }\r\n            } catch (error) {\r\n                console.error(error);\r\n            }\r\n        }\r\n        getData()\r\n    }, [])\r\n    const handleModal = (data) => {\r\n        async function getData() {\r\n            try {\r\n                const res = await service.post('/users/edit', { \"name\": data.name, \"email\": data.email })\r\n                if (res.status === 201) {\r\n                    alert('profil uytgedildi')\r\n                }\r\n            } catch (error) {\r\n                console.error(error);\r\n            }\r\n        }\r\n        getData()\r\n    }\r\n    const profileShow = useSelector(state => state.profileShow.profileShow)\r\n    useEffect(()=>{\r\n        !profileShow && window.location.replace('/')\r\n    },[])\r\n    return (\r\n        <div className='md:w-3/4 px-3 md:px-0 md:mt-5 mt-0 w-full flex flex-col'>\r\n            <h1 className='mb-4 sm:mt-0 mt-5 text-center text-2xl font-bold'>PROFILIMI ÜÝTGETMEK</h1>\r\n            <form onSubmit={handleSubmit(data => handleModal(data))} className='px-4 md:w-3/5 w-full mx-auto'>\r\n                <div class=\"px-2 py-2 pb-8\">\r\n                    <Controller\r\n                        control={control}\r\n                        name='name'\r\n                        defaultValue={name}\r\n                        render={({ field: { onChange, onBlur } }) => {\r\n                            return (\r\n                                <div className='my-4'>\r\n                                    <label htmlFor='name' className='text-black'>Adynyz <span className='text-red-600'>*</span></label>\r\n                                    <input defaultValue={name} onChange={onChange} onBlur={onBlur} type=\"text\" id='name' className=\"focus:border-red-500 focus:outline-none mt-2 border-gray-400 ring-red-500 outline-red-600 block items-center py-2 p-1 pl-2 w-full text-sm text-gray-900  bg-white rounded-r border\" />\r\n                                    <p className='text-red-500'>{errors.name?.message}</p>\r\n                                </div>\r\n                            )\r\n                        }}\r\n                    />\r\n                    <Controller\r\n                        control={control}\r\n                        name='email'\r\n                        defaultValue={email}\r\n                        render={({ field: { onChange, onBlur } }) => {\r\n                            return (\r\n                                <div className='my-4'>\r\n                                    <label htmlFor='email' className='text-black'>E-poçtaňyz <span className='text-red-600'>*</span></label>\r\n                                    <input defaultValue={email} onChange={onChange} onBlur={onBlur} type='text' id='email' className=\"focus:border-red-500 focus:outline-none mt-2 border-gray-400 ring-red-500 outline-red-600 block items-center py-2 p-1 pl-2 w-full text-sm text-gray-900  bg-white rounded-r border\" />\r\n                                    <p className='text-red-500'>{errors.email?.message}</p>\r\n                                </div>\r\n                            )\r\n                        }}\r\n                    />\r\n                    <button type='submit' className='transition duration-500 ease-in-out hover:bg-black w-full cursor-pointer mt-6 h-10 flex items-center bg-red-600 text-white rounded justify-center'>\r\n                        <p>Profilimi üýtgetmek</p>\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProfileEdit"],"names":["service","axios","baseURL","interceptors","request","use","res","headers","localStorage","getItem","err","Promise","reject","response","status","console","log","Authorization","then","data","setItem","catch","useState","name","setName","email","setEmail","schema","yup","shape","min","required","useForm","resolver","yupResolver","control","handleSubmit","errors","formState","setUser","useEffect","error","getData","profileShow","useSelector","state","window","location","replace","className","onSubmit","alert","handleModal","class","defaultValue","render","field","onChange","onBlur","htmlFor","type","id","message"],"sourceRoot":""}